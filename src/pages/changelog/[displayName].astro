---
import Layout from "@layouts/Layout.astro";
import VerticalStepper from "@components/vertical-stepper";
import { GetCurrentChangelog, changelogDate } from "src/lib/changelog";

const { displayName } = Astro.params;

const project = GetCurrentChangelog(Astro.locals, displayName);
Astro.locals.project = project;

const generated = project.changelog.map((cl) => [
    changelogDate(cl.week),
    ...cl.commits.flatMap((c) => c.generated),
]);
---

<Layout
    title="Autumn-cl"
    desc="Autogenerated changelogs!"
>
    <VerticalStepper generated={generated} />
</Layout>src/lib/changelog
